---
date: 2021-07-01T11:00:00.000Z
layout: post
title: 项目总结
last_modified_at: 2024-07-01T20:28:59.000Z
categories:
  - 技术
  - 
tags: 
updated: 2025-07-05 00:55:32
---

## 小程序组件

### 1. 定位附近柜机（地理位置/地图相关API）

涉及页面：src/pages/nearbyBoxList/index.js

用到API：wx.authorize, wx.getLocation, wx.openLocation, wx.createMapContext

实现思路：

- 先用 wx.authorize 申请地理位置权限。

- 权限通过后，wx.getLocation 获取用户当前经纬度。

- 用经纬度请求后端接口，获取附近柜机列表。

- 支持地图模式，wx.createMapContext 创建地图上下文，wx.openLocation 可直接导航到柜机。

- 结合百度地图/高德地图API做地址联想和地图展示
### 2. 扫码功能（扫码API）

涉及页面：src/pages/BaseApplication/bindPhone/index.js

用到API：wx.scanCode

实现思路：

- 用户点击按钮后，调用 wx.scanCode 打开微信扫码界面。

- 扫码成功后拿到二维码内容，进行业务跳转（如跳转到取件页面）。

- 失败时可做错误提示。
### 3. 登录与用户信息（登录API、企业微信API）

涉及页面：src/pages/moblieLogin/index.js

用到API：wx.login, wx.qy.login, wx.hideShareMenu

实现思路：

- 登录时调用 wx.login 获取临时登录凭证（code），用于后端换取用户身份。

- 企业微信环境下用 wx.qy.login。

- 页面初始化时用 wx.hideShareMenu 禁用分享功能，保护隐私。
### 4. 本地存储与全局数据（本地存储API）

涉及页面：src/app.js, src/pages/BaseApplication/expressCheck/home/index.js, src/pages/BaseApplication/expressCheck/detail/index.js

用到API：wx.getStorageSync, wx.setStorageSync, wx.getStorage, wx.setStorage

实现思路：

- 用于存储和读取用户信息、定位信息、历史快递单号等。

- 例如：缓存定位信息、缓存快递查询历史、缓存用户token等。
### 5. 页面跳转与导航（页面跳转API）

涉及页面：多处

用到API：wx.navigateTo, wx.redirectTo, wx.reLaunch, wx.navigateBack, wx.switchTab

实现思路：

- 业务流转时，调用不同的页面跳转API实现页面间的跳转和返回。

- 例如扫码后跳转、登录后跳转、支付后跳转等。
### 6. 系统信息与UI适配（系统信息API）

涉及页面：src/app.js, src/pages/BaseApplication/expressCheck/home/index.js, src/pages/BaseApplication/expressCheck/detail/index.js

用到API：wx.getSystemInfoSync, wx.getSystemInfo, wx.getMenuButtonBoundingClientRect

实现思路：

- 获取设备信息、屏幕尺寸、平台类型（iOS/Android/企业微信）等，用于UI适配和体验优化。

- 例如适配iPhone X安全区、动态设置导航栏高度等。

## 技术升级vue2-3，webpack-vite

## 微信小程序拆包

## 单测

## 首屏优化

## vue组件封装

## react树形组件

## 柜机可视化渲染组件

## 黄金眼埋点组件
## 1. 微信原生埋点（wx.reportEvent）

- 用法：wx.reportEvent('event_name', { ...params })

- 场景：用于微信小程序官方的数据统计和分析，事件名和参数需在微信公众平台提前配置。

- 举例：

- 登录相关：wx.reportEvent('login_phone_verify_code', {})

- 首页服务点击：wx.reportEvent('index_storage_package_service', {...})

- 广告、活动、支付、订单等多业务场景均有使用
## 2. 自研埋点（commonReport）

- 用法：commonReport({ fc_type: 'xxx', ... })

- 实现：封装在 src/lib/reportCore/index.js，底层继承自 WxPlatFormReport，可扩展多平台。

- 场景：用于自定义业务埋点，便于后端大数据分析、用户行为追踪、A/B测试等。

- 举例：

- 页面加载：commonReport({ fc_type: 'page_load', ... })

- 组件点击、活动曝光、支付流程、优惠券领取等

- 通过 setFcPageFio(pageName) 可自动带上 openId 做页面加载埋点

---

## 3. 典型埋点场景梳理

- 登录/注册/验证码：埋点用户输入、点击、登录成功/失败等关键节点

- 扫码/取件/寄件：埋点扫码动作、取件成功、异常流程

- 首页/服务点击：埋点首页各服务区块点击、曝光

- 广告/活动：埋点广告曝光、点击、跳转、支付等

- 订单/支付：埋点下单、支付、支付结果、异常处理

- 优惠券/卡券：埋点领取、使用、分享等

- 页面加载/停留：自动埋点页面加载、停留时长等

---

## 4. 埋点实现机制

- 微信原生埋点：直接调用 wx.reportEvent，数据自动上报到微信后台。

- 自研埋点：通过 commonReport 封装，支持自定义参数、自动带用户ID、openId等，便于后端灵活分析。

- 代码分布：埋点代码分布在各业务页面、组件、核心流程节点，通常在用户操作、页面加载、关键业务流转点调用。

---

## 5. 代码示例

js

Apply to index.js

// 微信原生埋点

wx.reportEvent('login_phone_verify_code', {});

// 自研埋点

commonReport({

  fc_type: 'page_load',

  fc_page_context: { page_name: 'login_page' }

});

---

## 总结

本项目埋点体系健全，既有微信官方埋点，也有自研埋点，覆盖了登录、扫码、支付、广告、订单、页面加载等全链路关键节点。

你可以在面试中强调：

- 埋点的双通道（官方+自研）设计

- 关键业务节点的全覆盖

- 埋点参数的灵活性和可扩展性

- 埋点数据对产品优化、用户行为分析、A/B测试的价值

如需某一业务场景的埋点代码细节，可进一步展开！

Add Context
## 项目搭建 Eslint、Ts、git hooks、jenkins

## pm项目

## i18n插件

## kafka、mysql、mongoDB数据对接

## websocket推送预警事件

## cesium智慧城市，车辆轨迹回放，摄像头播放，echarts

## nodejs采集、清洗脚本，持久化

## docker

## 系统权限管理